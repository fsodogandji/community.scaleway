- name: secret-manager test
  hosts: localhost
  vars:
    name: "unit_test-create-secret-generated_password"
    "project_id": "55a4141e-16e7-4150-a8fe-8405f8ef2bb5"
    password_length: 12
    password_specs:
    - printable
    - digits
    - ascii_lowercase
    - ascii_uppercase
  tasks:
  - name: password generation
    set_fact:
      data: "{{ data | default([]) + [lookup('password', '/dev/null length={{ password_length }} chars=' ~item)]}}"
    loop: "{{ password_specs }}"

  - name: create a secret version from an existing secret`
    create_secret_version:
      data: "{{ data }}" 
      name: "{{ name }}"
      project_id: "{{ project_id }}"
    register: output
  - name: dump test output
    debug:
      # var: output.message
      msg: "{{ data }}"